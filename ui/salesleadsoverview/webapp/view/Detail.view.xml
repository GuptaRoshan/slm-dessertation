<mvc:View controllerName="slo.salesleadsoverview.controller.Detail"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:u="sap.ui.unified"
    xmlns:t="sap.ui.table"
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:viz.data="sap.viz.ui5.data"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
    xmlns:uxp="sap.uxap">
    <uxp:ObjectPageLayout id="ObjectPageLayout" upperCaseAnchorBar="false">
        <uxp:headerTitle>
            <uxp:ObjectPageHeader objectTitle="Statistics">
            </uxp:ObjectPageHeader>
        </uxp:headerTitle>
        <uxp:headerContent>
            <!-- <ObjectAttribute title="" text="This example explains the rules for the rendering of sections"/> -->
        </uxp:headerContent>

        <uxp:sections>
            <uxp:ObjectPageSection titleUppercase="false" title="Analytics">
                <uxp:subSections>
                    <uxp:ObjectPageSubSection showTitle="false">
                        <!-- <Text text="svsvs" wrapping="false" /> -->

                        <Panel expandable="true" expanded="true" headerText="Leads by Country" width="auto" class="sapUiResponsiveMargin">
                            <content>

                                <FlexBox justifyContent="Center" alignItems="Center" backgroundDesign="Translucent" direction = "Row" width="100%" height="100%">
                                    <!-- <viz:Popover id="idPopOver"></viz:Popover> -->
                                    <viz:VizFrame vizProperties="{ title: {text : 'Total Hot Leads by Country', visible : true}, yAxis:{scale: { fixedRange: true, minValue: 0,   maxValue: 4 } },  plotArea:  { dataLabel: { visible: true } } }" id="idVizFrame" uiConfig="{applicationSet:'fiori'}" height='23rem' width="60rem" vizType='bar'>
                                        <viz:dataset>
                                            <viz.data:FlattenedDataset data="{/d/linedata}">
                                                <viz.data:dimensions>
                                                    <viz.data:DimensionDefinition name="Location" value="{location}" displayValue="{location}" />
                                                </viz.data:dimensions>
                                                <viz.data:measures>
                                                    <viz.data:MeasureDefinition name="Count" value="{count}" />
                                                </viz.data:measures>
                                            </viz.data:FlattenedDataset>
                                        </viz:dataset>

                                        <viz:feeds>
                                            <viz.feeds:FeedItem uid="valueAxis" type="Measure" values="Count" />
                                            <viz.feeds:FeedItem uid="categoryAxis" type="Dimension" values="Location" />
                                        </viz:feeds>
                                    </viz:VizFrame>
                                </FlexBox>

                            </content>
                        </Panel>

                    </uxp:ObjectPageSubSection>

                    <uxp:ObjectPageSubSection showTitle="false">

                        <Panel expandable="true" expanded="true" headerText="Top Important Leads" width="auto" class="sapUiResponsiveMargin">
                            <content>

                                <FlexBox justifyContent="Center" alignItems="Center" backgroundDesign="Translucent" direction = "Row" width="100%" height="100%">

                                    <viz:VizFrame vizProperties="{ title: {text : 'Top 10 Hot Leads', visible : true},  plotArea: { dataLabel: { visible: true }, colorPalette:['#FF8000']  } }" id="idVizFrame-2" uiConfig="{applicationSet:'fiori'}" height='25rem' width="60rem" vizType='column'>
                                        <viz:dataset>
                                            <viz.data:FlattenedDataset data="{/d/piedata}">
                                                <viz.data:dimensions>
                                                    <viz.data:DimensionDefinition name="Email" value="{email}" displayValue="{email}" />
                                                </viz.data:dimensions>
                                                <viz.data:measures>
                                                    <viz.data:MeasureDefinition name="Score %" value="{count}" />
                                                </viz.data:measures>
                                            </viz.data:FlattenedDataset>
                                        </viz:dataset>

                                        <viz:feeds>
                                            <viz.feeds:FeedItem uid="valueAxis" type="Measure" values="Score %" />
                                            <viz.feeds:FeedItem uid="categoryAxis" type="Dimension" values="Email" />
                                        </viz:feeds>
                                    </viz:VizFrame>

                                </FlexBox>

                            </content>
                        </Panel>

                    </uxp:ObjectPageSubSection>

                </uxp:subSections>
            </uxp:ObjectPageSection>

            <uxp:ObjectPageSection titleUppercase="false" title="Lead Information">
                <uxp:subSections>
                    <uxp:ObjectPageSubSection titleUppercase="false">
                        <!-- <Text text="Title" /> -->
                        <t:Table id= "leadTable" rows="{path : 'oObjectModel>/', sorter : {path : 'class', descending : true }  }" enableGrouping="true" visibleRowCountMode="Interactive" selectionMode="None" visibleRowCount="13" ariaLabelledBy="title">
                            <t:columns>

                                <t:Column sortProperty="class" sorted="true" >
                                    <Label design="Bold" text="Class" />
                                    <t:template>
                                        <!-- <Text text="{oObjectModel>class}" wrapping="false" /> -->
                                        <ObjectStatus text="{oObjectModel>class}" state="Indication04" />
                                    </t:template>
                                </t:Column>

                                <t:Column design="Bold">
                                    <Label text="Email" />
                                    <t:template>
                                        <Text text="{oObjectModel>email}" wrapping="true" />
                                    </t:template>
                                </t:Column>

                                <t:Column design="Bold">
                                    <Label text="Title" />
                                    <t:template>
                                        <Text text="{oObjectModel>title}" wrapping="false" />
                                    </t:template>
                                </t:Column>

                                <t:Column design="Bold" width="25rem">
                                    <Label text="Content" />
                                    <t:template>
                                        <Text text="{oObjectModel>content}" wrapping="false" />
                                    </t:template>
                                </t:Column>

                                <t:Column design="Bold" hAlign="Center">
                                    <Label text="Named Entity" />
                                    <t:template>
                                        <Button text="Sender Details" press="onHandleClickOfEntity"/>
                                    </t:template>
                                </t:Column>

                                <t:Column design="Bold" hAlign="Center">
                                    <Label text="Score" />
                                    <t:template>
                                        <ObjectNumber number="{oObjectModel>probability}%" state="{oObjectModel>state}" />
                                    </t:template>
                                </t:Column>

                                <t:Column hAlign="Center">
                                    <!-- <Label text="" /> -->
                                    <t:template>
                                        <Button type="Emphasized" text="Send Email" press="onHandleClickOfEmail"/>
                                    </t:template>
                                </t:Column>


                                <!-- <t:Column hAlign="Center" sortProperty="srtnum" sorted="true" visible="true">
                                    <Label text="srtnum" />
                                    <t:template>
                                        <Text text="{oObjectModel>srtnum}" wrapping="false" />
                                    </t:template>
                                </t:Column> -->

                            </t:columns>

                        </t:Table>

                    </uxp:ObjectPageSubSection>
                </uxp:subSections>
            </uxp:ObjectPageSection>
        </uxp:sections>


    </uxp:ObjectPageLayout>
</mvc:View>
